<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/x-icon" href="../../assets/img/favicon.ico">
  <link rel="stylesheet" href="../../assets/css/style.css">
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="../../assets/js/script.js"></script>
  <title>Formulário de Aptidão</title>
</head>
<body>
  <div class="title_p">
  
  <nav>
      <a href="../../index.html">Inicio</a>
      
      <a href="../sobre/sobre.html">Sobre Nós</a>
      <a  id="btLogin" href="../login/login.html"><i class="fa fa-hospital-o"></i> Login</a>
  </nav>

  </div>
  
  <div class="forms" id="etapa1">
    <img class="logo-img" src="../../assets/img/logo_red.png" alt="">

  <form id="aptidao-form">
    <label for="nome_completo">Nome Completo:</label>
    <input type="text" id="nome_completo" name="nome_completo" required>
    
    <label for="celular">Celular:</label>
    <input type="text" id="celular" name="celular" required>
    
    <label for="cidade">Cidade:</label>
    <input type="text" id="cidade" name="cidade" required>
    
    <label for="data">Data:</label>
    <input type="date" id="data" name="data" required>
    
    <label for="apto">Apto:</label>
    <input type="checkbox" id="apto" name="apto" class="styled-checkbox">

      <div class="btn-box">
        <button type="submit" >Enviar   <i id="SobreBtnIcon" class="fa fa-heart" ></i></button>

  </form>
</div>

  <script >
    // Selecionar o formulário
var form = document.getElementById('aptidao-form');

// Adicionar um evento de envio ao formulário
form.addEventListener('submit', function(e) {
  e.preventDefault(); // Impedir o envio padrão do formulário

  // Criar um objeto FormData para coletar os dados do formulário
  var formData = new FormData(form);

  // Criar uma solicitação XMLHttpRequest
  var xhr = new XMLHttpRequest();

  // Configurar a solicitação POST para o endpoint
  xhr.open('POST', '../../api/v2/novo-doador.php', true);

  // Definir o cabeçalho necessário para o envio do formulário
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

  // Função de callback para tratar a resposta
  xhr.onload = function() {
    if (xhr.status === 201) {
      // Dados salvos com sucesso
      alert('Dados salvos com sucesso.');
      form.reset(); // Limpar o formulário
    } else {
      // Erro ao salvar os dados
      alert('Erro ao salvar os dados: ' + xhr.responseText);
    }
  };

  // Envio da solicitação com os dados do formulário
  xhr.send(new URLSearchParams(formData));
});

  </script>
</body>
</html>
